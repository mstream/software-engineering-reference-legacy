(self.webpackChunkdigital_security_reference=self.webpackChunkdigital_security_reference||[]).push([[51],{44304:function(e,t,n){"use strict";n.d(t,{n:function(){return c}});var r=n(67294),a=n(86010),l="container_1Pru";function c(e){var t=e.colorClassNames,n=Object.entries(t).map((function(e,t){var n=e[0],l=e[1];return r.createElement("li",{className:(0,a.Z)(n),key:t},l)}));return r.createElement("div",{className:(0,a.Z)(l,"padding--md","padding-top--lg","padding-right--lg")},r.createElement("ul",null,n))}},78695:function(e,t,n){"use strict";n.d(t,{a:function(){return l}});var r=n(67294),a=n(50210);function l(e){var t=e.headers,n=e.host,l=e.method,c=e.path,i=function(e){return Object.entries(e).map((function(e){return e[0]+": "+e[1]})).join("\n")}(Object.assign({Host:n},t));return r.createElement(a.Z,{className:"html",title:"HTTP Request"},l+" "+c+" HTTP/1.1\n"+i)}},18652:function(e,t,n){"use strict";n.d(t,{pv:function(){return s},pb:function(){return c},Oo:function(){return i}});var r=n(67294),a=n(86010),l="container_8l-3";function c(e){var t=e.children;return r.createElement("div",{className:(0,a.Z)("card__body")},t)}function i(e){var t=e.children;return r.createElement("div",{className:(0,a.Z)("card__footer")},r.createElement("hr",null),t)}function s(e){var t=e.children,n=e.title;return r.createElement("div",{className:(0,a.Z)(l,"margin--md","card")},r.createElement("div",{className:(0,a.Z)("card__header")},r.createElement("h3",null,n),r.createElement("hr",null)),t)}},53825:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J},frontMatter:function(){return C},metadata:function(){return H},toc:function(){return M}});var r=n(22122),a=n(19756),l=n(67294),c=n(3905),i=n(92137),s=n(87757),o=n.n(s),u=n(48764),m=n(86010),d=n(83973),p=n(53416),f=n(50210),v=n(44304),E=n(78695),h=n(18652),g="input_2MGf";function N(e){var t=null!=e.value?e.value:"LOADING...",n=Math.max(e.label.length,t.length+2);return l.createElement("div",null,l.createElement("label",{htmlFor:e.id},t.length?e.label+": ":""),l.createElement("input",(0,r.Z)({},e,{className:(0,m.Z)(g),id:e.id,onChange:e.onChange,placeholder:e.label,size:Math.min(64,n),type:"text",value:t})))}var b="token_3ug6",Z="header_3qc7",x="payload_36PH",y="signature_2Di7",w="HS256",T="JWT",k=Math.floor(Date.now()/1e3)+86400;function S(){return(S=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.K)(w,{extractable:!0});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error("Secret creation error",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function _(){return(_=(0,i.Z)(o().mark((function e(t){var n,r,a,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.expirationTime,r=t.issuer,a=t.secret,l=t.subject,e.prev=1,e.next=4,new d.N({}).setProtectedHeader({typ:T}).setProtectedHeader({alg:w}).setIssuer(r).setSubject(l).setExpirationTime(n).sign(a);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.error("Token creation error:",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function j(e){var t=e.expirationTime,n=e.issuer,r=e.subject,a=JSON.stringify({alg:w,typ:T},null,4),c=JSON.stringify({exp:t,iss:n,sub:r},null,4);return l.createElement("div",{className:(0,m.Z)("container","padding--md")},l.createElement("div",{className:(0,m.Z)("row")},l.createElement("div",{className:(0,m.Z)(Z,"col","col--6")},l.createElement(f.Z,{className:"json",title:"Header"},a)),l.createElement("div",{className:(0,m.Z)(x,"col","col--6")},l.createElement(f.Z,{className:"json",title:"Payload"},c))))}function O(e){var t=e.token;if(null!==t){var n,r=t.split("."),a=r[0],c=r[1],i=r[2],s=((n={})[Z]="header",n[x]="payload",n[y]="signature",n);return l.createElement("div",{className:(0,m.Z)("container","padding--md")},l.createElement("div",{className:(0,m.Z)("row")},l.createElement("div",{className:(0,m.Z)("col col--9")},l.createElement("p",{className:(0,m.Z)(b)},l.createElement("span",{className:(0,m.Z)(Z)},a),l.createElement("strong",null,"."),l.createElement("span",{className:(0,m.Z)(x)},c),l.createElement("strong",null,"."),l.createElement("span",{className:(0,m.Z)(y)},i))),l.createElement("div",{className:(0,m.Z)("col col--3")},l.createElement(v.n,{colorClassNames:s}))))}return l.createElement("div",{className:(0,m.Z)("container")},l.createElement("div",{className:(0,m.Z)("row")},l.createElement("div",{className:(0,m.Z)("col col-12")},l.createElement("p",null,"loading..."))))}function D(){var e=l.useState(!0),t=e[0],n=e[1],r=l.useState("alice"),a=r[0],c=r[1],i=l.useState(null),s=i[0],o=i[1],d=l.useState(null),p=d[0],f=d[1],v=l.useState("bob"),g=v[0],b=v[1],Z=l.useState(null),x=Z[0],y=Z[1];return l.useEffect((function(){return n(!0),function(){return n(!1)}}),[]),l.useEffect((function(){null===s&&function(){return S.apply(this,arguments)}().then((function(e){crypto.subtle.exportKey("raw",e).then((function(n){t&&(o(e),f(u.Buffer.from(n,{encoding:"binary"}).toString("base64")))}))}))}),[s]),l.useEffect((function(){null!==s&&function(e){return _.apply(this,arguments)}({expirationTime:k,issuer:a,secret:s,subject:g}).then((function(e){t&&y(e)}))}),[a,s,x]),l.createElement(h.pv,{title:"JWT"},l.createElement(h.pb,null,l.createElement(j,{expirationTime:k,issuer:a,subject:g}),l.createElement(O,{token:x}),l.createElement("div",{className:(0,m.Z)("container","padding--md")},l.createElement("div",{className:(0,m.Z)("row")},l.createElement("div",{className:(0,m.Z)("col col--12")},l.createElement(E.a,{headers:{Authorization:"Bearer "+x},host:"www.example.com",method:"GET",path:"/index.html"}))))),l.createElement(h.Oo,null,l.createElement("div",{className:(0,m.Z)("container")},l.createElement("div",{className:(0,m.Z)("row")},l.createElement("div",{className:(0,m.Z)("col col--12")},l.createElement(N,{id:"issuer",onChange:function(e){return c(e.target.value)},label:"Issuer",value:a}))),l.createElement("div",{className:(0,m.Z)("row")},l.createElement("div",{className:(0,m.Z)("col col--12")},l.createElement(N,{id:"subject",onChange:function(e){return b(e.target.value)},label:"Subject",value:g}))),l.createElement("div",{className:(0,m.Z)("row")},l.createElement("div",{className:(0,m.Z)("col col--9")},l.createElement("input",{minLength:"1",placeholder:"secret",readOnly:!0,size:48,type:"text",value:p||"loading..."})),l.createElement("div",{className:(0,m.Z)("col col--3")},l.createElement("button",{className:(0,m.Z)("button","button--primary"),onClick:function(){return o(null)}},"Regenerate Secret"))))))}var C={title:"JSON Web Token",sidebar_position:4},H={unversionedId:"digital-security/jwt",id:"digital-security/jwt",isDocsHomePage:!1,title:"JSON Web Token",description:"if (TextDecoder == null) {",source:"@site/docs/digital-security/jwt.mdx",sourceDirName:"digital-security",slug:"/digital-security/jwt",permalink:"/digital-security/jwt",version:"current",sidebarPosition:4,frontMatter:{title:"JSON Web Token",sidebar_position:4},sidebar:"defaultSidebar",previous:{title:"Message Authorization",permalink:"/digital-security/authorization/oauth"},next:{title:"Overview",permalink:"/git/overview"}},M=[{value:"Sandbox",id:"sandbox",children:[]}],P={toc:M};function J(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,c.kt)("wrapper",(0,r.Z)({},P,n,{components:t,mdxType:"MDXLayout"}),(0,c.kt)("p",null,"if (TextDecoder == null) {\nTextDecoder = require('util').TextDecoder\n}"),(0,c.kt)("p",null,"if (TextEncoder == null) {\nTextEncoder = require('util').TextEncoder\n}"),(0,c.kt)("h2",{id:"sandbox"},"Sandbox"),(0,c.kt)(D,{mdxType:"Jwt"}))}J.isMDXComponent=!0}}]);