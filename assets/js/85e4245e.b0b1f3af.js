(self.webpackChunkdigital_security_reference=self.webpackChunkdigital_security_reference||[]).push([[51],{44304:function(e,t,n){"use strict";n.d(t,{n:function(){return l}});var r=n(67294),a=n(86010),c="container_1Pru";function l(e){var t=e.colorClassNames,n=Object.entries(t).map((function(e,t){var n=e[0],c=e[1];return r.createElement("li",{className:(0,a.Z)(n),key:t},c)}));return r.createElement("div",{className:(0,a.Z)(c,"padding--md","padding-top--lg","padding-right--lg")},r.createElement("ul",null,n))}},78695:function(e,t,n){"use strict";n.d(t,{a:function(){return c}});var r=n(67294),a=n(50210);function c(e){var t=e.headers,n=e.host,c=e.method,l=e.path,i=function(e){return Object.entries(e).map((function(e){return e[0]+": "+e[1]})).join("\n")}(Object.assign({Host:n},t));return r.createElement(a.Z,{className:"html",title:"HTTP Request"},c+" "+l+" HTTP/1.1\n"+i)}},18652:function(e,t,n){"use strict";n.d(t,{pv:function(){return o},pb:function(){return i},Oo:function(){return s}});var r=n(67294),a=n(86010),c="container_8l-3",l="controlsContainer_2iCX";function i(e){var t=e.children;return r.createElement("div",{className:(0,a.Z)("card__body")},t)}function s(e){var t=e.children;return r.createElement("div",{className:(0,a.Z)("card__footer",l)},r.createElement("hr",null),t)}function o(e){var t=e.children,n=e.title;return r.createElement("div",{className:(0,a.Z)(c,"margin--md","card")},r.createElement("div",{className:(0,a.Z)("card__header")},r.createElement("h3",null,n),r.createElement("hr",null)),t)}},38674:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D},frontMatter:function(){return H},metadata:function(){return M},toc:function(){return P}});var r=n(22122),a=n(19756),c=n(67294),l=n(3905),i=n(92137),s=n(87757),o=n.n(s),u=n(48764),m=n(86010),d=n(83973),p=n(53416),v=n(50210),f=n(44304),E=n(78695),h=n(18652),g="input_2MGf";function N(e){var t=e.label,n=e.id,l=e.onChange,i=e.value,s=(0,a.Z)(e,["label","id","onChange","value"]),o=null!=i?i:"LOADING...",u=Math.max(t.length,o.length+2);return c.createElement("div",null,c.createElement("label",{htmlFor:n},o.length?t+": ":""),c.createElement("input",(0,r.Z)({},s,{className:(0,m.Z)(g),id:n,onChange:l,placeholder:t,size:Math.min(64,u),type:"text",value:o})))}var b="token_3ug6",Z="header_3qc7",y="payload_36PH",w="signature_2Di7",x="HS256",k="JWT",S=Math.floor(Date.now()/1e3)+86400;function _(){return(_=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.K)(x,{extractable:!0});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error("Secret creation error",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function j(){return(j=(0,i.Z)(o().mark((function e(t){var n,r,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.expirationTime,r=t.issuer,a=t.secret,c=t.subject,e.prev=1,e.next=4,new d.N({}).setProtectedHeader({typ:k}).setProtectedHeader({alg:x}).setIssuer(r).setSubject(c).setExpirationTime(n).sign(a);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.error("Token creation error:",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function T(e){var t=e.expirationTime,n=e.issuer,r=e.subject,a=JSON.stringify({alg:x,typ:k},null,4),l=JSON.stringify({exp:t,iss:n,sub:r},null,4);return c.createElement("div",{className:(0,m.Z)("container","padding--md")},c.createElement("div",{className:(0,m.Z)("row")},c.createElement("div",{className:(0,m.Z)(Z,"col","col--6")},c.createElement(v.Z,{className:"json",title:"Header"},a)),c.createElement("div",{className:(0,m.Z)(y,"col","col--6")},c.createElement(v.Z,{className:"json",title:"Payload"},l))))}function C(e){var t=e.token;if(null!==t){var n,r=t.split("."),a=r[0],l=r[1],i=r[2],s=((n={})[Z]="header",n[y]="payload",n[w]="signature",n);return c.createElement("div",{className:(0,m.Z)("container","padding--md")},c.createElement("div",{className:(0,m.Z)("row")},c.createElement("div",{className:(0,m.Z)("col col--9")},c.createElement("p",{className:(0,m.Z)(b)},c.createElement("span",{className:(0,m.Z)(Z)},a),c.createElement("strong",null,"."),c.createElement("span",{className:(0,m.Z)(y)},l),c.createElement("strong",null,"."),c.createElement("span",{className:(0,m.Z)(w)},i))),c.createElement("div",{className:(0,m.Z)("col col--3")},c.createElement(f.n,{colorClassNames:s}))))}return c.createElement("div",{className:(0,m.Z)("container")},c.createElement("div",{className:(0,m.Z)("row")},c.createElement("div",{className:(0,m.Z)("col col-12")},c.createElement("p",null,"loading..."))))}function O(){var e=c.useRef(!1),t=c.useState("alice"),n=t[0],r=t[1],a=c.useState(null),l=a[0],i=a[1],s=c.useState(null),o=s[0],d=s[1],p=c.useState("bob"),v=p[0],f=p[1],g=c.useState(null),b=g[0],Z=g[1];return c.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),c.useEffect((function(){null===l&&function(){return _.apply(this,arguments)}().then((function(t){crypto.subtle.exportKey("raw",t).then((function(n){e.current&&(i(t),d(u.Buffer.from(n,{encoding:"binary"}).toString("base64")))}))}))}),[l]),c.useEffect((function(){null!==l&&function(e){return j.apply(this,arguments)}({expirationTime:S,issuer:n,secret:l,subject:v}).then((function(t){e.current&&Z(t)}))}),[n,l,b]),c.createElement(h.pv,{title:"JWT"},c.createElement(h.pb,null,c.createElement(T,{expirationTime:S,issuer:n,subject:v}),c.createElement(C,{token:b}),c.createElement("div",{className:(0,m.Z)("container","padding--md")},c.createElement("div",{className:(0,m.Z)("row")},c.createElement("div",{className:(0,m.Z)("col col--12")},c.createElement(E.a,{headers:{Authorization:"Bearer "+b},host:"www.example.com",method:"GET",path:"/index.html"}))))),c.createElement(h.Oo,null,c.createElement("div",{className:(0,m.Z)("container")},c.createElement("div",{className:(0,m.Z)("row")},c.createElement("div",{className:(0,m.Z)("col col--12")},c.createElement(N,{id:"issuer",onChange:function(e){return r(e.target.value)},label:"Issuer",value:n}))),c.createElement("div",{className:(0,m.Z)("row")},c.createElement("div",{className:(0,m.Z)("col col--12")},c.createElement(N,{id:"subject",onChange:function(e){return f(e.target.value)},label:"Subject",value:v}))),c.createElement("div",{className:(0,m.Z)("row")},c.createElement("div",{className:(0,m.Z)("col col--9")},c.createElement("input",{minLength:"1",placeholder:"secret",readOnly:!0,size:48,type:"text",value:o||"loading..."})),c.createElement("div",{className:(0,m.Z)("col col--3")},c.createElement("button",{className:(0,m.Z)("button","button--primary"),onClick:function(){return i(null)}},"Regenerate Secret"))))))}var H={title:"JSON Web Token",sidebar_position:4},M={unversionedId:"digital-security/jwt",id:"digital-security/jwt",isDocsHomePage:!1,title:"JSON Web Token",description:"Sandbox",source:"@site/docs/digital-security/jwt.mdx",sourceDirName:"digital-security",slug:"/digital-security/jwt",permalink:"/digital-security/jwt",version:"current",sidebarPosition:4,frontMatter:{title:"JSON Web Token",sidebar_position:4},sidebar:"defaultSidebar",previous:{title:"Message Authorization",permalink:"/digital-security/authorization/oauth"},next:{title:"Overview",permalink:"/git/overview"}},P=[{value:"Sandbox",id:"sandbox",children:[]}],J={toc:P};function D(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,l.kt)("wrapper",(0,r.Z)({},J,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"sandbox"},"Sandbox"),(0,l.kt)(O,{mdxType:"Jwt"}))}D.isMDXComponent=!0}}]);